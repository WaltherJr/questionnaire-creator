<!DOCTYPE html>
<html lang="sv">
	<head>
		<meta charset="UTF-8">
		<title>xplor formulärapplikation</title>

		<script src="jquery/jquery-3.1.1.min.js" type="text/javascript"></script>
		<script src="shared/shiny.js" type="text/javascript"></script>
		<script src="questionnaire.js" type="text/javascript"></script>
		<script src="ranked_choice.js" type="text/javascript"></script>
		<script src="modal_dialog.js" type="text/javascript"></script>

		<link rel="stylesheet" type="text/css" href="shared/shiny.css">
		<link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" type="text/css" href="stylesheet.css">
		<link rel="stylesheet" type="text/css" href="ranked_choice.css">
		<link rel="stylesheet" type="text/css" href="modal_dialog.css">
	</head>

	<body>
		<div id="modal-dialog" onclick="closeModalDialog(event)" style="height: 0; opacity: 0">
			<div id="modal-dialog-content">
				<div id="modal-dialog-header">
					<span id="modal-dialog-title"></span>
					<span id="modal-dialog-exit" class="fa fa-close"></span>
				</div>
				<p id="modal-dialog-message"></p>
				<div id="modal-dialog-footer">
					<button id="modal-dialog-btn-ok" class="modal-dialog-button" type="button">OK</button>
					<button id="modal-dialog-btn-cancel" class="modal-dialog-button" type="button">Avbryt</button>
				</div>
			</div>
		</div>

		<div style="background: url(test.svg); width: 120px; height: 120px"></div>

		<div id="questionnaire">
			<form id="frm-questionnaire">
				<div id="questionnaire-header" class="section" onclick="switchFocusedSection(event)">
					<div id="questionnaire-title" onfocus="switchFocusedSection(event)" contenteditable="true" spellcheck="false">Namnlöst formulär</div>
					<div id="questionnaire-description textarea" onfocus="switchFocusedSection(event)" contenteditable="true" spellcheck="false">Beskrivning av formulär</div>
				</div>

				<div class="popup-mandatory-question" style="display: none; opacity: 0;">
					<span style="color: rgb(255,100,100)" class="fa fa-2x fa-exclamation-circle"></span>
					<span class="popup-mandatory-question-text" style="margin-left: 10px">Denna fråga är <span style="font-weight: bold">obligatorisk</span>, <br>vänligen ge ett svar på frågan.</span>
					<span class="fa fa-3x fa-caret-right"></span>
				</div>

				<ul class="questionnaire-operations-list">
					<li id="btn-questionnaire-hide-all-sections">
						<button class="fa fa-window-minimize" type="button" onclick="hideAllSections()"></button>
						<span class="tooltip right">Göm alla sektioner</span>
					</li>
					<li id="btn-questionnaire-show-all-sections" style="display: none">
						<button class="fa fa-window-maximize" type="button" onclick="showAllSections()"></button>
						<span class="tooltip right">Visa alla sektioner</span>
					</li>
				</ul>
				<button id="btn-submit-questionnaire" type="button" onclick="submitQuestionnaire()" style="display: none">Skicka in</button>
			</form>

		<!-- HIDDEN ELEMENTS -->
		<!-- Question -->
		<div class="frm-question section" style="display: none; overflow: visible" onclick="switchFocusedSection(event)">
			<select class="sel-question-type" onchange="changeQuestionType(this)" style="float: right">
				<option value="short-answer">Kort svar</option>
				<option value="paragraph">Stycke</option>
				<option value="single-choice">Enkelval</option>
				<option value="multiple-choice">Flerval</option>
				<option value="ranked-choice" selected="selected">Rankat val</option>
			</select>

			<label class="lbl-mandatory-question"><input type="checkbox" checked>Obligatorisk fråga<span class="tooltip" style="position: absolute; margin-left: 5px; margin-top: -5px;">Gör denna fråga obligatorisk att svara på.</span></label>

			<ul class="section-top-operations-list">
				<li class="btn-hide-section">
					<button class="fa fa-window-minimize" type="button" onclick="hideSection(this)"></button>
					<span class="tooltip top">Göm sektion</span>
				</li>
				<li class="btn-show-section" style="display: none">
					<button class="fa fa-window-maximize" type="button" onclick="showSection(this)"></button>
					<span class="tooltip top">Visa sektion</span>
				</li>
			</ul>

			<div class="frm-question-question-title section-title" contenteditable="true" spellcheck="false">Frågetitel</div>

			<p class="frm-question-question-description" contenteditable="true" spellcheck="false">Frågebeskrivning</p>

			<ul class="form-operations-list">
				<li><button type="button" onclick="removeSection(this)" class="fa fa-trash"></button><span class="tooltip bottom">Ta bort sektion</span></li>
				<li><button type="button" onclick="duplicateSection(this)" class="fa fa-copy"></button><span class="tooltip bottom">Duplicera sektion</span></li>
				<li><button type="button" onclick="moveSection(this, 'up')" class="fa fa-arrow-up"></button><span class="tooltip bottom">Flytta upp sektion</span></li>
				<li><button type="button" onclick="moveSection(this, 'down')" class="fa fa-arrow-down"></button><span class="tooltip bottom">Flytta ner sektion</span></li>
			</ul>
		</div>

		<!-- Heading-and-description -->
		<div class="frm-heading-and-description section" style="display: none" onclick="switchFocusedSection(event)">
			<ul class="section-top-operations-list">
				<li class="btn-hide-section">
					<button class="fa fa-window-minimize" type="button" onclick="hideSection(this)"></button>
					<span class="tooltip top">Göm sektion</span>
				</li>
				<li class="btn-show-section" style="display: none">
					<button class="fa fa-window-maximize" type="button" onclick="showSection(this)"></button>
					<span class="tooltip top">Visa sektion</span>
				</li>
			</ul>

			<div class="frm-heading-and-description-heading section-title" onfocus="switchFocusedSection(event)" contenteditable="true" spellcheck="false">Rubrik</div>
			<div class="textarea" onfocus="switchFocusedSection(event)" contenteditable="true" spellcheck="false">Beskrivning</div>

			<ul class="form-operations-list">
				<li><button type="button" onclick="removeSection(this)" class="fa fa-trash"></button><span class="tooltip bottom">Ta bort sektion</span></li>
				<li><button type="button" onclick="duplicateSection(this)" class="fa fa-copy"></button><span class="tooltip bottom">Duplicera sektion</span></li>
				<li><button type="button" onclick="moveSection(this, 'up')" class="fa fa-arrow-up"></button><span class="tooltip bottom">Flytta upp sektion</span></li>
				<li><button type="button" onclick="moveSection(this, 'down')" class="fa fa-arrow-down"></button><span class="tooltip bottom">Flytta ner sektion</span></li>
			</ul>

		</div>

		</div>

		<ul id="toolbar">
			<li><button type="button" onclick="addQuestion()" class="fa fa-fw fa-plus-circle"></button><span class="tooltip right">Lägg till fråga</span></li>
			<li><button type="button" onclick="addHeadingAndDescription()" class="fa fa-fw fa-header"></button><span class="tooltip right">Lägg till rubrik och beskrivning</span></li>
			<li><button type="button" onclick="addHyperlink()" class="fa fa-fw fa-link"></button><span class="tooltip right">Lägg till hyperlänk</span></li>
			<li><button type="button" onclick="preview()" class="fa fa-fw fa-eye"></button><span class="tooltip right">Förhandsgranska formulär</span></li>
			<li><button type="button" onclick="clearQuestionnaire()" class="fa fa-fw fa-trash"></button><span class="tooltip right">Rensa formulär</span></li>
			<li><button type="button" onclick="saveQuestionnaire()" class="fa fa-fw fa-save"></button><span class="tooltip right">Spara formulär</span></li>
			<li><button type="button" onclick="loadQuestionnaire()" class="fa fa-fw fa-folder-open"></button><span class="tooltip right">Ladda formulär</span></li>
		</ul>

		<!-- QUESTION TYPES -->
		<!-- Short answer -->
		<div class="question-type-short-answer" style="display: none">
			<div class="short-answer-text" contenteditable="true" spellcheck="false">Kort svarstext</div>
		</div>

		<!-- Paragraph -->
		<div class="question-type-paragraph" style="display: none">
			<div class="textarea" data-initial-text="Lång svarstext" onfocus="switchFocusedSection(event)" disabled>Lång svarstext</div>
		</div>

		<!-- Single choice -->
		<div class="question-type-single-choice" style="display: none; overflow: auto">
			<div class="alternative" style="overflow: visible">
				<input type="radio" disabled="disabled">&nbsp;
				<label contenteditable="true">Alternativ</label>
				<span class="question-remove-alternative fa fa-remove" style="visibility: hidden" onclick="removeQuestionAlternative(this)"></span>
				<span class="tooltip">Ta bort alternativ</span>
			</div>
			<button class="btn-add-alternative" type="button" onclick="addAnswerAlternative(this)">Lägg till alternativ</button>
		</div>

		<!-- Multiple choice -->
		<div class="question-type-multiple-choice" style="display: none; overflow: auto">
			<div class="alternative">
				<input type="checkbox" disabled="disabled">&nbsp;
				<label contenteditable="true">Alternativ</label>
				<span class="question-remove-alternative fa fa-remove" style="visibility: hidden" onclick="removeQuestionAlternative(this)"></span>
				<span class="tooltip">Ta bort alternativ</span>
			</div>
			<button class="btn-add-alternative" type="button" onclick="addAnswerAlternative(this)">Lägg till alternativ</button>
		</div>

		<!-- Ranked choice -->
		<div class="question-type-ranked-choice" style="display: none; overflow: visible">
			<ul class="ranked-choice-scale-list">
				<li><span contenteditable="true" spellcheck="false">Dåligt</span></li>
				<li><span contenteditable="true" spellcheck="false">Varken eller</span></li>
				<li><span contenteditable="true" spellcheck="false">Bra</span></li>
			</ul>

			<ul class="ranked-choice-list">
				<li data-position="0" style="display: none;">
					<div>
						<span class="ranked-choice-text" contenteditable="false" spellcheck="false" onmousedown="rankedChoiceOnMouseDown(event)">&harr;</span>
					</div>
					<div class="ranked-choice-slider-drag-handle" onmousedown="rankedChoiceOnMouseDown(event)" style="margin-bottom: -100px"></div>
					<svg class="ranked-choice-polygon" onmousedown="rankedChoiceOnMouseDown(event)" style="height: 100px">
						<polygon points="0,0 8,0 4,100" style="fill: rgb(200,200,200)"></polygon>
					</svg>
				</li>
				<li data-position="0">
					<div>
						<span class="ranked-choice-text" contenteditable="true" spellcheck="false">Alternativ 1</span>
						<a class="ranked-choice-remove fa fa-remove" onclick="removeRankedChoice(this)" style="display: none"></a>
						<span class="tooltip" style="position: absolute">Ta bort alternativ</span>
					</div>
					<div class="ranked-choice-slider-drag-handle" onmousedown="rankedChoiceOnMouseDown(event)"></div>
					<svg class="ranked-choice-polygon" onmousedown="rankedChoiceOnMouseDown(event)">
						<polygon points="0,0 8,0 4,100" fill="rgb(200,200,200)"></polygon>
					</svg>
				</li>
			</ul>

			<svg class="ranked-choice-slider-bar" data-steps="15" data-choice-type="A">
				<defs>
					<linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
						<stop class="ranked-choice-type-a-red-gradient-stop" offset="50%" style="stop-color: white; stop-opacity: 1"></stop>
						<stop class="ranked-choice-type-a-red-gradient-stop" offset="50%" style="stop-color: #f44336; stop-opacity: 1"></stop>
						<stop offset="50%" style="stop-color: white; stop-opacity: 1"></stop>
						<stop class="ranked-choice-type-a-green-gradient-stop" offset="50%" style="stop-color: #4caf50; stop-opacity: 1"></stop>
						<stop class="ranked-choice-type-a-green-gradient-stop" offset="50%" style="stop-color: white; stop-opacity: 1"></stop>
					</linearGradient>
					<linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="0%">
						<stop class="ranked-choice-type-b-blue-1-gradient-stop" offset="50%" style="stop-color: white; stop-opacity: 1"></stop>
						<stop class="ranked-choice-type-b-blue-1-gradient-stop" offset="50%" style="stop-color: #2196f3; stop-opacity: 1"></stop>
						<stop offset="50%" style="stop-color: white; stop-opacity: 1"></stop>
						<stop class="ranked-choice-type-b-blue-2-gradient-stop" offset="50%" style="stop-color: #2196f3; stop-opacity: 1"></stop>
						<stop class="ranked-choice-type-b-blue-2-gradient-stop" offset="50%" style="stop-color: white; stop-opacity: 1"></stop>
					</linearGradient>
					<linearGradient id="grad3" x1="0%" y1="0%" x2="100%" y2="0%">
						<stop offset="0%" style="stop-color: white; stop-opacity: 1"></stop>
						<stop class="ranked-choice-type-c-blue-gradient-stop" offset="0%" style="stop-color: #2196f3; stop-opacity: 1"></stop>
						<stop class="ranked-choice-type-c-blue-gradient-stop" offset="0%" style="stop-color: white; stop-opacity: 1"></stop>
					</linearGradient>
				</defs>

				<rect class="ranked-choice-slider-bar-gradient-rect" width="100%" height="100%" fill="url(#grad1)"></rect>
				<line class="ranked-choice-slider-bar-middle-line" x1="50%" y1="0%" x2="50%" y2="100%" stroke="rgba(0,0,0,.5)" stroke-width="1"></line>
			</svg>

			<p class="ranked-choice-order-description" style="display: none">Alternativ 1 <span style="font-weight: bold">är lika bra</span></p>
			<label class="ranked-choice-choice-type-label">Valtyp:&nbsp;&nbsp;<select onchange="changeRankedChoiceType(this)">
				<option selected>A</option>
				<option>B</option>
				<option>C</option>
			</select></label>
			<button class="btn-add-alternative" style="margin-left: 5px" type="button" onclick="addRankedChoice(this)">Lägg till alternativ</button>
			<label class="ranked-choice-show-middle-line-label" style="display: none"><input class="ranked-choice-show-middle-line-checkbox" type="checkbox" checked="checked" onchange="toggleSliderBarMiddleLine(this)">Visa mittenlinje</label><br>
		</div>
	</body>
</html>